# 协议
WEB开发不管是CS结构、BS结构，不管业务运行在哪个端，都要解决上面的问题。上面问题的核心是通信，通信方式又分很多种，打电话、发微信、写信等等，而这里涉及的是抽象的网络通信。网络通信和现实通信很像，所以要完成通信就要有一些规定，我冲你比划手势你给我qq上回个emoji表情总不叫个事儿。所以就出现了“协议”这么个东西。说直白一点，“协议”就是规定通信的方式，让双方互相理解。

# 网络分层
网络分层，就好比寄信，Bob给Alice写信，信封上写明收信人地址、邮编，这是写给邮差看；信封里又套一个信封，写上Alice，这是给Alice家负责收信的哥哥看（假设他们家有专人负责收信派发）；信纸上的内容才是Bob写给Alice的。

# http协议
http协议（Hyper Text Transfer Protocol）是应用层的一个协议。应用层协议还有诸如ftp、smtp、thunder等等协议，他们和http是同一级别的。
## 什么是http协议？
上文讲了，协议是规定通信“规矩”的，这个http协议就是立一个规矩。具体包含哪些？
1. 报文结构
2. 报文首部、报文正文
3. 返回结果与状态码
...

### 标准的http报文示范


![image.png](http://upload-images.jianshu.io/upload_images/1915742-814dabaf7d3ff800.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


### 状态码

状态码都是三位数字，以开头数字不同分为五个大类：
1xx：信息状态码
2xx：成功状态码（常见的是200）
3xx：重定向状态码，如要完成请求还要进行下一步行动（常见304，缓存未失效）
4xx：客户端错误状态码（常见404，无法请求URL）
5xx：服务器错误状态码（常见502，服务器错误）具体每一大类里的个小类都有细微差别，可以参考[RFC2616](https://datatracker.ietf.org/doc/rfc2616/?include_text=1)。

### 方法


![image.png](http://upload-images.jianshu.io/upload_images/1915742-6b2b7f076ba142a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## https又是啥？
https和http有四个字母一样，这就暗示了它们的重合关系。https只是在http协议通信的基础上加了一层加密（Hyper Text Transfer Protocol over Secure Socket Layer）。
那就来重点说说这个加密是怎么实现的。
1. 这个加密是在组装报文之后，所以报文格式和http协议的格式是一样的
2. 所谓加密就是发送方把`aaa`变成`A1A1A1`，解密就是接收方收到`A1A1A1`后又能还原成`aaa`(当然这中间具体的加解密的算法实现我们就不讨论了)
3. 加密和解密的算法不一定一样，算法一样叫对称加密算法，不一样叫的非对称加密算法（现用的大都需要借助私钥、公钥加解密）
4. 通信过程中用哪种加密算法都可以，核心点是不让黑客解密（严格说是解密成本极大）
5. 非对称加密算法加解密消耗的资源比对称加密算法消耗的资源大得多，所以**通信过程中用的都是对称加密算法**
6. 结合4、5点，把**双方确认加密算法本身的过程用非对称加密算法实现是最划算的**
7. 双方通信的第一步就是用非对称加密算法确定后续通信使用的对称加密算法
8. 但是第一步又怎么确认服务器就是服务器，用户就是用户呢？从用户发请求开始，服务器就会和用户进行一大串认证。
    1. 浏览器请求网站后（假设第一次访问）会下载一个数字证书，这个证书承载了服务器的验证信息，加解密相关包括：CA证书颁发机构、网站的公钥、证书到期时间、数字签名、hash算法、加密算法
    2. 浏览器拿到证书以后先判定证书真伪。先看数字签名，这个hash值是CA私钥加密过的（要不然别人把内容改了，hash也一并改掉）。CA公钥解密得hash值后看整个证书是否被篡改，这一步类似检验和校验。
    3. 浏览器也可以认证用户（例如git）
    4. 之后使用公钥加密一个对称算法和key，双方同意就可以拿这个对称加密算法和key开始通信啦

# AJAX


